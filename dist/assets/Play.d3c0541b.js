import{u as K,m as v,o as s,i as c,f as u,k as w,F as I,p as L,h as O,v as E,l as k,x as r,y as Q,z,A as $,n as A,r as g,g as P,s as j,c as C,t as x,w as Z,T as fe}from"./vendor.0543d0c3.js";import{C as ve,B as ge}from"./Container.1c3551f5.js";import{_ as b}from"./index.a238f037.js";const he={name:"BackButton",setup(){const{replace:t}=K(),n=v(!1);return{confirmation:n,setConfirmation:o=>{n.value=o},setRedirect:o=>{o&&t({path:"/"})}}}},be=t=>(L("data-v-a74ed838"),t=t(),O(),t),Be={key:0,class:"confirmation-dialog"},we=be(()=>u("p",null,"Are you sure you want to leave?",-1));function xe(t,n,a,e,o,i){return s(),c(I,null,[u("span",{class:"close",onClick:n[0]||(n[0]=l=>e.setConfirmation(!e.confirmation))}),e.confirmation?(s(),c("div",Be,[we,u("button",{onClick:n[1]||(n[1]=l=>e.setRedirect(!0))},"Yes"),u("button",{onClick:n[2]||(n[2]=l=>e.setConfirmation(!1))},"No")])):w("",!0)],64)}var Se=b(he,[["render",xe],["__scopeId","data-v-a74ed838"]]);function Pe(t){const n=v(0),a=v(0);return E(()=>{n.value=t.value.clientWidth,a.value=t.value.clientHeight}),{widthRef:n,heightRef:a}}const D={name:"BallComponent",props:{disabled:{type:Boolean,default:!0,required:!0},setStartPoint:{type:Function,required:!0}},setup(t){const{state:n,dispatch:a}=k();let e=n.ball.position.x,o;const i=v(null),l=r(()=>`${n.ball.position.y}px`),d=r(()=>n.ball.shooting),_=r(()=>n.player.player),p=r(()=>_.value.color),y=v("24px"),m=h=>{a("game/setBowls",h)},f=()=>{e=e*1.08,y.value=`${e}px`,i.value.offsetLeft<=262&&i.value.offsetLeft>=190&&m(i.value.offsetTop),e>730&&(clearInterval(o),a("ball/setBallShooting",!1))};return Q(()=>{clearInterval(o)}),z(d,h=>{h?o=setInterval(f,15):(clearInterval(o),t.setStartPoint(!0),y.value="24px",e=n.ball.position.x)}),{offsetY:l,refBall:i,hPosition:y,currentPlayer:_,color:p}}},ee=()=>{$(t=>({"1d112310":t.color,"471c080a":t.offsetY,"68fac246":t.hPosition}))},te=D.setup;D.setup=te?(t,n)=>(ee(),te(t,n)):ee;const ke=D,Ce={key:0,class:"ball",ref:"refBall"};function Ie(t,n,a,e,o,i){return a.disabled?w("",!0):(s(),c("div",Ce,null,512))}var $e=b(ke,[["render",Ie],["__scopeId","data-v-00ca21a9"]]);const ne={0:{top:105,left:170},1:{top:130,left:130},2:{top:80,left:130},3:{top:155,left:90},4:{top:105,left:90},5:{top:55,left:90},6:{top:180,left:50},7:{top:130,left:50},8:{top:80,left:50},9:{top:30,left:50}};const F={name:"BowlComponent",props:{index:{type:Number,required:!0}},setup(t){const{state:n}=k(),a=r(()=>`${ne[t.index].top}px`),e=r(()=>`${ne[t.index].left}px`),o=r(()=>n.game.bowls);return{top:a,left:e,activeBowls:o}}},ae=()=>{$(t=>({"3f00a0bb":t.top,bde0a53e:t.left}))},re=F.setup;F.setup=re?(t,n)=>(ae(),re(t,n)):ae;const Ae=F;function Ve(t,n,a,e,o,i){return s(),c("div",{class:A(["bowl",!e.activeBowls.includes(a.index)&&"red"])},null,2)}var Ne=b(Ae,[["render",Ve],["__scopeId","data-v-56ee38fd"]]);const Y={name:"VerticalArrow",props:{disabled:{type:Boolean,required:!0}},setup(t){let n=-20,a=!0,e;const o=10,{state:i,dispatch:l}=k(),d=v("5px"),_=v(n),p=r(()=>t.disabled),y=r(()=>i.game.standBy),m=()=>{a?n=n+5:n=n-5,d.value=`${n}px`,_.value=n},f=()=>{m(),n===230?a=!1:n===-10&&(a=!0)};return E(()=>e=setInterval(()=>f(),o)),Q(()=>{clearInterval(e)}),z(p,h=>{h?e=setInterval(()=>f(),o):(clearInterval(e),n=5,a=!0,l("ball/setBallPosition",{x:24,y:_.value}))}),{verticalPosition:d,checkDisabled:p,invisible:y}}},oe=()=>{$(t=>({"99e9aa7e":t.verticalPosition}))},se=Y.setup;Y.setup=se?(t,n)=>(oe(),se(t,n)):oe;const qe=Y,je={key:0,class:"v-arrow"};function Re(t,n,a,e,o,i){return e.invisible?w("",!0):(s(),c("div",je))}var Ge=b(qe,[["render",Re],["__scopeId","data-v-14b9fdd8"]]);const M={name:"PlayBoard",components:{Bowl:Ne,VerticalArrow:Ge,Ball:$e},props:{player:{type:Object,required:!0}},setup(t){const{state:n,dispatch:a}=k(),e=r(()=>t.player),o=r(()=>t.player.color),i=r(()=>n.game.strike),l=v(null),d=v(!0),{widthRef:_,heightRef:p}=Pe(l);return{currentPlayer:e,color:o,boardRef:l,widthRef:_,heightRef:p,disabled:d,strike:i,setStartPoint:f=>{d.value=f,f&&a("ball/clearBallPosition")},shootBall:f=>{a("ball/setBallShooting",!0)}}}},le=()=>{$(t=>({"8b880404":t.color}))},ce=M.setup;M.setup=ce?(t,n)=>(le(),ce(t,n)):le;const Te=M,Le={class:"game-container"},Oe={key:0},Ee={key:1},ze={class:"game-board"},De=["src"],Fe=["disabled"];function Ye(t,n,a,e,o,i){const l=g("VerticalArrow"),d=g("Bowl"),_=g("Ball");return s(),c("div",Le,[e.disabled?(s(),c("span",Oe,"Click on board to set ball direction")):(s(),c("span",Ee,"Click on Play button to shoot")),u("div",ze,[u("div",{class:A(["board",e.disabled&&"pointer"]),id:"board",ref:"boardRef",onClick:n[0]||(n[0]=p=>e.setStartPoint(!1))},[P(l,{disabled:e.disabled},null,8,["disabled"]),e.strike?(s(),c("img",{key:0,src:"../../assets/images/strike.gif",class:"strike",alt:"Strike",width:"240",height:"240"},null,8,De)):(s(!0),c(I,{key:1},j([...Array(10)],(p,y)=>(s(),C(d,{key:y,index:y},null,8,["index"]))),128)),P(_,{disabled:e.disabled,setStartPoint:e.setStartPoint},null,8,["disabled","setStartPoint"])],2),u("button",{onClick:n[1]||(n[1]=p=>e.shootBall(e.currentPlayer.player)),disabled:e.disabled},"Play",8,Fe)])])}var Me=b(Te,[["render",Ye],["__scopeId","data-v-42d97be6"]]);const We={name:"ScoreItem",props:{game:{type:Number,required:!0},index:{type:Number,required:!0},total:{type:Number},score:{type:[Array,Number]},scoreBoard:{type:Array,required:!0},win:{type:Boolean,required:!0}},setup(t){const n=r(()=>{const e=t.score?t.score:[];return e.length===1?"":e}),a=r(()=>{const e=t.score?t.score:[];return e.length===1?"X":e[0]+e[1]===10?"/":e});return{number:n,scuare:a}}},He=["textContent"],Ue={class:"scuare"},Xe={key:0,class:"scuare"},Je={colspan:"3"};function Ke(t,n,a,e,o,i){return s(),c("table",{class:A(["score-item",`${a.index===9?"last-item":""} ${a.win?"winner":""}`])},[u("tr",null,[u("td",{colspan:"3",textContent:x(a.index+1)},null,8,He)]),u("tr",null,[u("td",null,x(e.number?e.number[0]:""),1),u("td",Ue,x(e.scuare?e.scuare[0]:"-"),1),a.index===9?(s(),c("td",Xe,x(e.scuare[1]),1)):w("",!0)]),u("tr",null,[u("td",Je,x(a.total?a.total:""),1)])],2)}var Qe=b(We,[["render",Ke],["__scopeId","data-v-3d3b730e"]]);const W={name:"ScoreComponent",components:{ScoreItem:Qe},props:{player:{type:Object,required:!0},currentGame:{type:Number,required:!0},turn:{type:Number,required:!0},winner:{type:Object}},setup(t){const{state:n}=k(),a=r(()=>t.turn),e=r(()=>t.player.color),o=r(()=>t.winner||null),i=r(()=>n.game.scoreBoard.length?n.game.scoreBoard.find(d=>d.player===t.player.player):null),l=r(()=>n.game.acumulatedScore.length?n.game.acumulatedScore.find(d=>d.player===t.player.player):null);return{color:e,currentTurn:a,scoreBoard:i,acumulated:l,winningPlayer:o}}},ie=()=>{$(t=>({"0048a966":t.color}))},ue=W.setup;W.setup=ue?(t,n)=>(ie(),ue(t,n)):ie;const Ze=W,et=t=>(L("data-v-13c2f05a"),t=t(),O(),t),tt=et(()=>u("h2",null,"SCORE",-1));function nt(t,n,a,e,o,i){const l=g("ScoreItem");return s(),c("div",{class:A(["score",e.winningPlayer?e.winningPlayer.player===e.acumulated.player&&"champion":a.player.player!==e.currentTurn&&"disabled"])},[tt,u("div",{class:A(["player",e.winningPlayer&&e.winningPlayer.player===e.acumulated.player?"winner":""])},[u("span",null,x(a.player.name),1)],2),(s(!0),c(I,null,j([...Array(10)],(d,_)=>(s(),C(l,{game:a.currentGame,index:_,score:e.scoreBoard?e.scoreBoard.games[_]:[],total:e.acumulated?e.acumulated.score[_]:0,scoreBoard:e.scoreBoard?e.scoreBoard.games:[],win:e.winningPlayer?e.winningPlayer.player===e.acumulated.player:!1,key:_},null,8,["game","index","score","total","scoreBoard","win"]))),128))],2)}var at=b(Ze,[["render",nt],["__scopeId","data-v-13c2f05a"]]);const rt={name:"LoaderComponent"},ot={class:"center"};function st(t,n,a,e,o,i){return s(),c("div",ot,[(s(!0),c(I,null,j([...Array(10)],(l,d)=>(s(),c("div",{class:"wave",key:d}))),128))])}var lt=b(rt,[["render",st],["__scopeId","data-v-fb7da99c"]]);const ct={name:"PlayPage",components:{Container:ve,Score:at,CloseButton:Se,PlayBoard:Me,Button:ge,Loader:lt},setup(){const{dispatch:t,state:n}=k(),{replace:a}=K(),e=r(()=>n.player.players),o=r(()=>n.game.turn);r(()=>n.game.game);const i=r(()=>n.game.strike),l=r(()=>n.game.acumulatedScore.length?n.game.acumulatedScore:null),d=r(()=>n.game.gameOver),_=r(()=>n.game.standBy),p=v(!0),y=v(null),m=r(()=>n.player.player),f=r(()=>e.value.filter(B=>B.player!==m.value.player)[0]||null),h=r(()=>Math.floor(e.value.length/2)),_e=r(()=>e.value.filter(B=>B.player!==m.value.player)),H=B=>{const V=e.value.length;t("game/setTurn",1),B===V?(t("player/setCurrentPlayer",e.value[0]),t("game/nextGame")):t("player/setCurrentPlayer",e.value[B])},R=()=>{t("game/setStandBy",!0),t("game/setScore",m.value.player),setTimeout(()=>{t("game/setStandBy",!1),t("game/setStrike",!1),t("game/resetBowls"),H(m.value.player)},2500)},pe=()=>{p.value=!0,t("game/clearAllStates"),setTimeout(()=>{p.value=!1},1e3)},ye=()=>{a({path:"/register"})};return E(()=>{if(!e.value.length){a({path:"/register"});return}t("player/setCurrentPlayer",e.value[0]),setTimeout(()=>{p.value=!1},1e3)}),z([i,o],([B,V])=>{var U;const G=l.value?l.value.map(S=>S.score.length):[],me=G.some(S=>S===9);if(G.length?G.every(S=>S===10):!1){t("game/setGameOver",!0);const S=l.value?l.value.map(N=>{const T=N.score.reduce((q,J)=>q>J?q:J),X=e.value.find(q=>q.player===N.player);return X.score=T,{player:X}}):[];y.value=(U=S.sort((N,T)=>T.player.score-N.player.score)[0])==null?void 0:U.player;return}if(me&&V===4){R();return}if(B){R();return}if(V===3){R();return}}),{currentPlayer:m,nextPlayer:f,players:e,half:h,scoreBoard:_e,loading:p,standBy:_,acumulated:l,gameOver:d,winner:y,changePlayer:H,restartGame:pe,exit:ye}}},de=t=>(L("data-v-02ea112a"),t=t(),O(),t),it={key:1,class:"game-page"},ut={key:0,class:"next-turn"},dt=de(()=>u("div",{class:"next-trun-cover"},null,-1)),_t={class:"next-turn-text"},pt=de(()=>u("h1",null,"BOWLING 2D",-1)),yt={key:0,class:"credits"},mt={key:2,class:"restart"};function ft(t,n,a,e,o,i){const l=g("Loader"),d=g("CloseButton"),_=g("Score"),p=g("PlayBoard"),y=g("Button"),m=g("Container");return s(),C(m,null,{default:Z(()=>[e.loading?(s(),C(l,{key:0})):(s(),c("div",it,[P(fe,{name:"fade"},{default:Z(()=>[e.nextPlayer&&e.standBy?(s(),c("div",ut,[dt,u("div",_t,[u("span",null," Next turn "+x(e.nextPlayer.name),1)])])):w("",!0)]),_:1}),pt,P(d),e.winner?(s(),c("h2",yt,"Congratulations!! "+x(e.winner.name)+" you won this game",1)):w("",!0),P(_,{currentGame:0,player:e.currentPlayer,turn:e.currentPlayer.player,winner:e.winner},null,8,["player","turn","winner"]),e.gameOver?w("",!0):(s(),C(p,{key:1,player:e.currentPlayer},null,8,["player"])),(s(!0),c(I,null,j(e.scoreBoard,(f,h)=>(s(),C(_,{currentGame:0,player:f,turn:e.currentPlayer.player,winner:e.winner,key:h},null,8,["player","turn","winner"]))),128)),e.winner?(s(),c("div",mt,[P(y,{label:"Restart game",action:e.restartGame,disabled:!1,loading:!1,bg:"success"},null,8,["action"]),P(y,{label:"Exit",action:e.exit,disabled:!1,loading:!1,bg:"danger"},null,8,["action"])])):w("",!0)]))]),_:1})}var Bt=b(ct,[["render",ft],["__scopeId","data-v-02ea112a"]]);export{Bt as default};
