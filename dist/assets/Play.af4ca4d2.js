import{u as J,m as f,o as s,i as u,f as _,k as w,F as I,p as O,h as T,v as E,l as x,x as o,y as K,z,A as $,n as q,r as g,g as C,s as N,c as k,t as S,w as pe}from"./vendor.815fcac5.js";import{C as me,B as ye}from"./Container.731b20a4.js";import{_ as h}from"./index.df47db38.js";import{r as Q}from"./randomColor.478579a4.js";const fe={name:"BackButton",setup(){const{replace:t}=J(),r=f(!1);return{confirmation:r,setConfirmation:a=>{r.value=a},setRedirect:a=>{a&&t({path:"/"})}}}},ve=t=>(O("data-v-a74ed838"),t=t(),T(),t),ge={key:0,class:"confirmation-dialog"},he=ve(()=>_("p",null,"Are you sure you want to leave?",-1));function be(t,r,n,e,a,i){return s(),u(I,null,[_("span",{class:"close",onClick:r[0]||(r[0]=l=>e.setConfirmation(!e.confirmation))}),e.confirmation?(s(),u("div",ge,[he,_("button",{onClick:r[1]||(r[1]=l=>e.setRedirect(!0))},"Yes"),_("button",{onClick:r[2]||(r[2]=l=>e.setConfirmation(!1))},"No")])):w("",!0)],64)}var Be=h(fe,[["render",be],["__scopeId","data-v-a74ed838"]]);function we(t){const r=f(0),n=f(0);return E(()=>{r.value=t.value.clientWidth,n.value=t.value.clientHeight}),{widthRef:r,heightRef:n}}const D={name:"BallComponent",props:{disabled:{type:Boolean,default:!0,required:!0},setStartPoint:{type:Function,required:!0}},setup(t){const{state:r,dispatch:n}=x();let e=r.ball.position.x,a;const i=f(null),l=o(()=>`${r.ball.position.y}px`),d=o(()=>r.ball.shooting),c=o(()=>r.player.player),m=o(()=>c.value.color),p=f("24px"),b=v=>{n("game/setBowls",v)},y=()=>{e=e*1.08,p.value=`${e}px`,i.value.offsetLeft<=262&&i.value.offsetLeft>=190&&b(i.value.offsetTop),e>730&&(clearInterval(a),n("ball/setBallShooting",!1))};return K(()=>{clearInterval(a)}),z(d,v=>{v?a=setInterval(y,15):(clearInterval(a),t.setStartPoint(!0),p.value="24px",e=r.ball.position.x)}),{offsetY:l,refBall:i,hPosition:p,currentPlayer:c,color:m}}},Z=()=>{$(t=>({"1d112310":t.color,"471c080a":t.offsetY,"68fac246":t.hPosition}))},ee=D.setup;D.setup=ee?(t,r)=>(Z(),ee(t,r)):Z;const Se=D,Pe={key:0,class:"ball",ref:"refBall"};function xe(t,r,n,e,a,i){return n.disabled?w("",!0):(s(),u("div",Pe,null,512))}var Ce=h(Se,[["render",xe],["__scopeId","data-v-00ca21a9"]]);const te={0:{top:105,left:170},1:{top:130,left:130},2:{top:80,left:130},3:{top:155,left:90},4:{top:105,left:90},5:{top:55,left:90},6:{top:180,left:50},7:{top:130,left:50},8:{top:80,left:50},9:{top:30,left:50}};const F={name:"BowlComponent",props:{index:{type:Number,required:!0}},setup(t){const{state:r}=x(),n=o(()=>`${te[t.index].top}px`),e=o(()=>`${te[t.index].left}px`),a=o(()=>r.game.bowls);return{top:n,left:e,activeBowls:a}}},re=()=>{$(t=>({"3f00a0bb":t.top,bde0a53e:t.left}))},ne=F.setup;F.setup=ne?(t,r)=>(re(),ne(t,r)):re;const ke=F;function Ie(t,r,n,e,a,i){return s(),u("div",{class:q(["bowl",!e.activeBowls.includes(n.index)&&"red"])},null,2)}var $e=h(ke,[["render",Ie],["__scopeId","data-v-56ee38fd"]]);const Y={name:"VerticalArrow",props:{disabled:{type:Boolean,required:!0}},setup(t){let r=-20,n=!0,e;const a=10,{state:i,dispatch:l}=x(),d=f("5px"),c=f(r),m=o(()=>t.disabled),p=o(()=>i.game.standBy),b=()=>{n?r=r+5:r=r-5,d.value=`${r}px`,c.value=r},y=()=>{b(),r===230?n=!1:r===-10&&(n=!0)};return E(()=>e=setInterval(()=>y(),a)),K(()=>{clearInterval(e)}),z(m,v=>{v?e=setInterval(()=>y(),a):(clearInterval(e),r=5,n=!0,l("ball/setBallPosition",{x:24,y:c.value}))}),{verticalPosition:d,checkDisabled:m,invisible:p}}},ae=()=>{$(t=>({"99e9aa7e":t.verticalPosition}))},oe=Y.setup;Y.setup=oe?(t,r)=>(ae(),oe(t,r)):ae;const qe=Y,Ae={key:0,class:"v-arrow"};function Ve(t,r,n,e,a,i){return e.invisible?w("",!0):(s(),u("div",Ae))}var je=h(qe,[["render",Ve],["__scopeId","data-v-14b9fdd8"]]);const M={name:"PlayBoard",components:{Bowl:$e,VerticalArrow:je,Ball:Ce},props:{player:{type:Object,required:!0}},setup(t){const{state:r,dispatch:n}=x(),e=o(()=>t.player),a=o(()=>t.player.color),i=o(()=>r.game.strike),l=f(null),d=f(!0),{widthRef:c,heightRef:m}=we(l);return{currentPlayer:e,color:a,boardRef:l,widthRef:c,heightRef:m,disabled:d,strike:i,setStartPoint:y=>{d.value=y,y&&n("ball/clearBallPosition")},shootBall:y=>{n("ball/setBallShooting",!0)}}}},se=()=>{$(t=>({"8b880404":t.color}))},le=M.setup;M.setup=le?(t,r)=>(se(),le(t,r)):se;const Ne=M,Re={class:"game-container"},Ge={key:0},Le={key:1},Oe={class:"game-board"},Te=["src"],Ee=["disabled"];function ze(t,r,n,e,a,i){const l=g("VerticalArrow"),d=g("Bowl"),c=g("Ball");return s(),u("div",Re,[e.disabled?(s(),u("span",Ge,"Click on board to set ball direction")):(s(),u("span",Le,"Click on Play button to shoot")),_("div",Oe,[_("div",{class:q(["board",e.disabled&&"pointer"]),id:"board",ref:"boardRef",onClick:r[0]||(r[0]=m=>e.setStartPoint(!1))},[C(l,{disabled:e.disabled},null,8,["disabled"]),e.strike?(s(),u("img",{key:0,src:"../../assets/images/strike.gif",class:"strike",alt:"Strike",width:"240",height:"240"},null,8,Te)):(s(!0),u(I,{key:1},N([...Array(10)],(m,p)=>(s(),k(d,{key:p,index:p},null,8,["index"]))),128)),C(c,{disabled:e.disabled,setStartPoint:e.setStartPoint},null,8,["disabled","setStartPoint"])],2),_("button",{onClick:r[1]||(r[1]=m=>e.shootBall(e.currentPlayer.player)),disabled:e.disabled},"Play",8,Ee)])])}var De=h(Ne,[["render",ze],["__scopeId","data-v-42d97be6"]]);const Fe={name:"ScoreItem",props:{game:{type:Number,required:!0},index:{type:Number,required:!0},total:{type:Number},score:{type:[Array,Number]},scoreBoard:{type:Array,required:!0},win:{type:Boolean,required:!0}},setup(t){const r=o(()=>{const e=t.score?t.score:[];return e.length===1?"":e}),n=o(()=>{const e=t.score?t.score:[];return e.length===1?"X":e[0]+e[1]===10?"/":e});return{number:r,scuare:n}}},Ye=["textContent"],Me={class:"scuare"},We={key:0,class:"scuare"},He={colspan:"3"};function Ue(t,r,n,e,a,i){return s(),u("table",{class:q(["score-item",`${n.index===9?"last-item":""} ${n.win?"winner":""}`])},[_("tr",null,[_("td",{colspan:"3",textContent:S(n.index+1)},null,8,Ye)]),_("tr",null,[_("td",null,S(e.number?e.number[0]:""),1),_("td",Me,S(e.scuare?e.scuare[0]:"-"),1),n.index===9?(s(),u("td",We,S(e.scuare[1]),1)):w("",!0)]),_("tr",null,[_("td",He,S(n.total?n.total:""),1)])],2)}var Xe=h(Fe,[["render",Ue],["__scopeId","data-v-3d3b730e"]]);const W={name:"ScoreComponent",components:{ScoreItem:Xe},props:{player:{type:Object,required:!0},currentGame:{type:Number,required:!0},turn:{type:Number,required:!0},winner:{type:Object}},setup(t){const{state:r}=x(),n=o(()=>t.turn),e=o(()=>t.player.color),a=o(()=>t.winner||null),i=o(()=>r.game.scoreBoard.length?r.game.scoreBoard.find(d=>d.player===t.player.player):null),l=o(()=>r.game.acumulatedScore.length?r.game.acumulatedScore.find(d=>d.player===t.player.player):null);return{color:e,currentTurn:n,scoreBoard:i,acumulated:l,winningPlayer:a}}},ce=()=>{$(t=>({"0048a966":t.color}))},ie=W.setup;W.setup=ie?(t,r)=>(ce(),ie(t,r)):ce;const Je=W,Ke=t=>(O("data-v-13c2f05a"),t=t(),T(),t),Qe=Ke(()=>_("h2",null,"SCORE",-1));function Ze(t,r,n,e,a,i){const l=g("ScoreItem");return s(),u("div",{class:q(["score",e.winningPlayer?e.winningPlayer.player===e.acumulated.player&&"champion":n.player.player!==e.currentTurn&&"disabled"])},[Qe,_("div",{class:q(["player",e.winningPlayer&&e.winningPlayer.player===e.acumulated.player?"winner":""])},[_("span",null,S(n.player.name),1)],2),(s(!0),u(I,null,N([...Array(10)],(d,c)=>(s(),k(l,{game:n.currentGame,index:c,score:e.scoreBoard?e.scoreBoard.games[c]:[],total:e.acumulated?e.acumulated.score[c]:0,scoreBoard:e.scoreBoard?e.scoreBoard.games:[],win:e.winningPlayer?e.winningPlayer.player===e.acumulated.player:!1,key:c},null,8,["game","index","score","total","scoreBoard","win"]))),128))],2)}var et=h(Je,[["render",Ze],["__scopeId","data-v-13c2f05a"]]);const tt={name:"LoaderComponent"},rt={class:"center"};function nt(t,r,n,e,a,i){return s(),u("div",rt,[(s(!0),u(I,null,N([...Array(10)],(l,d)=>(s(),u("div",{class:"wave",key:d}))),128))])}var at=h(tt,[["render",nt],["__scopeId","data-v-fb7da99c"]]);Q(),Q();const ot={name:"PlayPage",components:{Container:me,Score:et,CloseButton:Be,PlayBoard:De,Button:ye,Loader:at},setup(){const{dispatch:t,state:r}=x(),{replace:n}=J(),e=o(()=>r.player.players),a=o(()=>r.game.turn);o(()=>r.game.game);const i=o(()=>r.game.strike),l=o(()=>r.game.acumulatedScore.length?r.game.acumulatedScore:null),d=o(()=>r.game.gameOver),c=f(!0),m=f(null),p=o(()=>r.player.player),b=o(()=>Math.floor(e.value.length/2)),y=o(()=>e.value.filter(P=>P.player!==p.value.player)),v=P=>{const A=e.value.length;t("game/setTurn",1),P===A?(t("player/setCurrentPlayer",e.value[0]),t("game/nextGame")):t("player/setCurrentPlayer",e.value[P])},R=()=>{t("game/setStandBy",!0),t("game/setScore",p.value.player),setTimeout(()=>{t("game/setStandBy",!1),t("game/setStrike",!1),t("game/resetBowls"),v(p.value.player)},2e3)},ue=()=>{c.value=!0,t("game/clearAllStates"),setTimeout(()=>{c.value=!1},1e3)},de=()=>{n({path:"/register"})};return E(()=>{if(!e.value.length){n({path:"/register"});return}t("player/setCurrentPlayer",e.value[0]),setTimeout(()=>{c.value=!1},1e3)}),z([i,a],([P,A])=>{var H;const G=l.value?l.value.map(B=>B.score.length):[],_e=G.some(B=>B===9);if(G.length?G.every(B=>B===10):!1){t("game/setGameOver",!0);const B=l.value?l.value.map(V=>{const L=V.score.reduce((j,X)=>j>X?j:X),U=e.value.find(j=>j.player===V.player);return U.score=L,{player:U}}):[];m.value=(H=B.sort((V,L)=>L.player.score-V.player.score)[0])==null?void 0:H.player;return}if(_e&&A===4){R();return}if(P){R();return}if(A===3){R();return}}),{currentPlayer:p,players:e,half:b,scoreBoard:y,loading:c,acumulated:l,gameOver:d,winner:m,changePlayer:v,restartGame:ue,exit:de}}},st=t=>(O("data-v-34b9a5ce"),t=t(),T(),t),lt={key:1,class:"game-page"},ct=st(()=>_("h1",null,"BOWLING 2D",-1)),it={key:0,class:"credits"},ut={key:2,class:"restart"};function dt(t,r,n,e,a,i){const l=g("Loader"),d=g("CloseButton"),c=g("Score"),m=g("PlayBoard"),p=g("Button"),b=g("Container");return s(),k(b,null,{default:pe(()=>[e.loading?(s(),k(l,{key:0})):(s(),u("div",lt,[ct,C(d),e.winner?(s(),u("h2",it,"Congratulations!! "+S(e.winner.name)+" you won this game",1)):w("",!0),C(c,{currentGame:0,player:e.currentPlayer,turn:e.currentPlayer.player,winner:e.winner},null,8,["player","turn","winner"]),e.gameOver?w("",!0):(s(),k(m,{key:1,player:e.currentPlayer},null,8,["player"])),(s(!0),u(I,null,N(e.scoreBoard,(y,v)=>(s(),k(c,{currentGame:0,player:y,turn:e.currentPlayer.player,winner:e.winner,key:v},null,8,["player","turn","winner"]))),128)),e.winner?(s(),u("div",ut,[C(p,{label:"Restart game",action:e.restartGame,disabled:!1,loading:!1,bg:"success"},null,8,["action"]),C(p,{label:"Exit",action:e.exit,disabled:!1,loading:!1,bg:"danger"},null,8,["action"])])):w("",!0)]))]),_:1})}var vt=h(ot,[["render",dt],["__scopeId","data-v-34b9a5ce"]]);export{vt as default};
